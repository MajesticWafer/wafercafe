<!DOCTYPE html>
<html>
<head>
  <title>Wafer Café</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <div id="header">
    <h1>The Wafer Café</h1>
  </div>

  <div id="emulators">
    <h2>Emulators:</h2>
    <button class="button-container button" onclick="location.href='ds/'"><b>DS Player</b></button>
    <button id="ios-ds" class="download button" onclick="downloadFile('mc-down/ds.mobileconfig')"><b>&#8681;</b></button> <br>
    <button class="button-container button" onclick="location.href='vba/'"><b>VBA Player</b></button>
    <button id="ios-vba" class="download button" onclick="downloadFile('mc-down/vba.mobileconfig')"><b>&#8681;</b></button> <br>
    <button class="button-container button" onclick="location.href='n64/'"><b>N64 Wasm</b></button>
    <button id="ios-n64" class="download button" onclick="downloadFile('mc-down/n64.mobileconfig')"><b>&#8681;</b></button>
  </div>

  <button id="back-button" onclick="window.location.href='/index.html'">Back</button>
  <button id="info">Info</button>
  <div id="info-panel">
    <h1>Download Info</h1>
    <p>The download buttons next to the emulator buttons only appear if you are on iOS. They download configuration files onto your device for easier installation and access to the emulators.</p> <br>
    <p>To install them, download the configuration file and go to settings. You should see that a profile has been downloaded, called Wafer Café (Console Name). Install it, and you should be all set!</p>
  </div>
  <script src="../verif.js"></script>
  <script>
    function downloadFile(url) {
      // temp anchor element
      var a = document.createElement('a');
      a.href = url;
      a.download = url.split('/').pop(); // Download attribute to the file name
      document.body.appendChild(a);
      a.click(); // Click to trigger download
      document.body.removeChild(a); // Del temp element
    }
  </script>
  <script>
      var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
      var isMac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;
      var maxTouchPoints = navigator.maxTouchPoints || navigator.msMaxTouchPoints;
      var ds = document.getElementById("ios-ds");
      var vba = document.getElementById("ios-vba");
      var n64 = document.getElementById("ios-n64");
        
      if(isIOS) {
          // iOS device
          // ds.style.display = "block";
          // vba.style.display = "block";
          // n64.style.display = "block";
      } else if (isMac && maxTouchPoints >= 2) {
          // iOS device spoofing as MAC
          // ds.style.display = "block";
          // vba.style.display = "block";
          // n64.style.display = "block";
      } else {
          // non-iOS device
          ds.style.display = "none";
          vba.style.display = "none";
          n64.style.display = "none";
      }
  </script>
  <script>
    document.getElementById('info').addEventListener('click', function() {
      const infoPanel = document.getElementById('info-panel');
      if (!infoPanel.classList.contains('active')) {
        infoPanel.style.display = 'block';
        infoPanel.classList.add('active');
      }
    });

    document.addEventListener('click', function(event) {
      const infoPanel = document.getElementById('info-panel');
      if (!infoPanel.contains(event.target) && event.target !== document.getElementById('info')) {
        infoPanel.classList.remove('active');
        setTimeout(function() {
          infoPanel.style.display = 'none';
        }, 800);
      }
    });
  </script>
</body>
</html>
