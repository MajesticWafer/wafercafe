<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xBRZ Scaler Demo</title>
    <style>
        body {
            background-color: #2e2e2e;
            color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        canvas {
            border: 1px solid #444;
            image-rendering: pixelated; /* Optional: adjust for sharp scaling */
        }

        #controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }
    </style>
</head>
<body>

<canvas id="canvas" width="320" height="240"></canvas>

<div id="controls">
    <button onclick="applyScale(2)">Scale 2x</button>
    <button onclick="applyScale(3)">Scale 3x</button>
    <button onclick="applyScale(4)">Scale 4x</button>
    <button onclick="applyScale(5)">Scale 5x</button>
    <button onclick="applyScale(6)">Scale 6x</button>
</div>

<script type="module">
    import { Scaler2x, Scaler3x, Scaler4x, Scaler5x, Scaler6x } from "./scalers/index.js";

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const img = new Image();
    img.src = 'source.png'; // Replace with your image path

    img.onload = () => {
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
    };

    function applyScale(scale) {
        const scalerMap = {
            2: Scaler2x,
            3: Scaler3x,
            4: Scaler4x,
            5: Scaler5x,
            6: Scaler6x
        };

        const scaler = new scalerMap[scale]();
        const srcCanvas = document.createElement('canvas');
        srcCanvas.width = canvas.width;
        srcCanvas.height = canvas.height;
        const srcCtx = srcCanvas.getContext('2d');
        srcCtx.drawImage(img, 0, 0, srcCanvas.width, srcCanvas.height);
        const srcImageData = srcCtx.getImageData(0, 0, srcCanvas.width, srcCanvas.height);

        const trgCanvas = document.createElement('canvas');
        trgCanvas.width = srcCanvas.width * scale;
        trgCanvas.height = srcCanvas.height * scale;
        const trgCtx = trgCanvas.getContext('2d');
        const trgImageData = trgCtx.createImageData(trgCanvas.width, trgCanvas.height);

        // Apply scaling
        scaler.scaleImage(scale, srcImageData.data, trgImageData.data, srcCanvas.width, srcCanvas.height, 0, srcCanvas.height);

        // Display scaled image
        canvas.width = trgCanvas.width;
        canvas.height = trgCanvas.height;
        ctx.putImageData(trgImageData, 0, 0);
    }
</script>

</body>
</html>
